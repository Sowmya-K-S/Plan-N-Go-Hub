<div class="booking-page">
    <div class="booking-content">

        <!-- booking form -->
        <div class="form-container">
            <!-- Booking Form -->
            <h1>Book Your Stay</h1>
        
            <form #bookingForm="ngForm" (ngSubmit)="onSubmit(bookingForm)" novalidate>
                <!-- Guest Details -->
                <h3>Guest Details</h3>
                <div class="form-group">
                  <label for="name">Name</label>
                  <input
                    type="text"
                    id="name"
                    [(ngModel)]="name"
                    name="name"
                    placeholder="Enter your name"
                    required
                    #nameInput="ngModel"
                  />
                  <div *ngIf="nameInput.invalid && nameInput.touched" class="error">
                    Name is required.
                  </div>
                </div>
              
                <div class="form-group">
                  <label for="age">Age</label>
                  <input
                    type="number"
                    id="age"
                    [(ngModel)]="age"
                    name="age"
                    placeholder="Enter your age"
                    required
                    min="1"
                    max="150"
                    #ageInput="ngModel"
                  />
                  <div *ngIf="ageInput.invalid && ageInput.touched" class="error">
                    <div *ngIf="ageInput.errors?.['required']">Age is required.</div>
                    <div *ngIf="ageInput.errors?.['min'] || ageInput.errors?.['max']">
                      Age must be between 1 and 150.
                    </div>
                  </div>
                </div>
              
                <div class="form-group">
                  <label for="email">Email</label>
                  <input
                    type="email"
                    id="email"
                    [(ngModel)]="email"
                    name="email"
                    placeholder="Enter your email"
                    required
                    email
                    #emailInput="ngModel"
                  />
                  <div *ngIf="emailInput.invalid && emailInput.touched" class="error">
                    <div *ngIf="emailInput.errors?.['required']">Email is required.</div>
                    <div *ngIf="emailInput.errors?.['email']">Please enter a valid email address.</div>
                  </div>
                </div>
              
                <div class="form-group">
                  <label for="phone">Phone</label>
                  <input
                    type="tel"
                    id="phone"
                    [(ngModel)]="phone"
                    name="phone"
                    placeholder="Enter your phone number"
                    required
                    pattern="^[0-9]{10,12}$"
                    maxlength="12"
                    #phoneInput="ngModel"
                  />
                  <div *ngIf="phoneInput.invalid && phoneInput.touched" class="error">
                    <div *ngIf="phoneInput.errors?.['required']">Phone number is required.</div>
                    <div *ngIf="phoneInput.errors?.['pattern']">Phone number must be 10-12 digits.</div>
                  </div>
                </div>
              
                <!-- Additional Guest Details -->
                <h3>Other Guests</h3>
                <div *ngFor="let guest of otherGuests; let i = index" class="form-group">
                  <label>Guest {{ i + 1 }} Name:</label>
                  <input
                    type="text"
                    [(ngModel)]="guest.name"
                    [name]="'guestName' + i"
                    placeholder="Enter guest name"
                    required
                    #guestNameInput="ngModel"
                  />
                  <div *ngIf="guestNameInput.invalid && guestNameInput.touched" class="error">
                    Guest name is required.
                  </div>
              
                  <label>Guest {{ i + 1 }} Age:</label>
                  <input
                    type="number"
                    [(ngModel)]="guest.age"
                    [name]="'guestAge' + i"
                    placeholder="Enter guest age"
                    required
                    min="1"
                    max="150"
                    #guestAgeInput="ngModel"
                  />
                  <div *ngIf="guestAgeInput.invalid && guestAgeInput.touched" class="error">
                    <div *ngIf="guestAgeInput.errors?.['required']">Age is required.</div>
                    <div *ngIf="guestAgeInput.errors?.['min'] || guestAgeInput.errors?.['max']">
                      Age must be between 1 and 150.
                    </div>
                  </div>
                </div>
              
                <div class="form-actions">
                  <button
                    type="submit"
                    class="btn btn-primary confirm-btn"
                    [disabled]="bookingForm.invalid"
                  >
                    Confirm Booking <fa-icon [icon]="faCheckCircle"></fa-icon>
                  </button>
                </div>
              </form>
              
              
        </div>

        <!-- Right side content (Hotel details and Price Breakdown) -->
        <div class="right-content">
            <!-- Hotel and Room Info -->
            <div class="room-info">
                <div class="room-details">
                    <img [src]="hotel.images[0]" alt="Hotel Image" class="hotel-image">
                    <div class="room-content">
                        <h2>{{ hotel.name }}</h2>
                        <p>{{ room.type }}</p> <p class="price">â‚¹{{ room.price }}/night</p>
                        <div class="amenities">
                            <div class="amenities-list">
                                <strong>Amenities:</strong><span *ngFor="let amenity of hotel.amenities" class="amenity-badge">
                                    {{ amenity }},
                                </span>
                            </div>
                        </div>
                        <p class="price"><strong>Check-in:</strong> {{ checkIn.toLocaleDateString() }}</p>
                        <p class="price"><strong>Check-out:</strong> {{ checkOut.toLocaleDateString() }}</p>
                    </div>
                </div>
            </div>

            <!-- Price Breakdown -->
            <div class="price-details">
                <h3>Total Price Breakdown</h3>
                <p><strong>Room Price:</strong> â‚¹{{ room.price }}</p> 
                <p><strong>Number of Nights:</strong> {{ stayDuration }}</p>
                <p><strong>No of Rooms:</strong> {{ noOfRooms }}</p>
                <p><strong>Total Price:</strong> â‚¹{{ totalPrice }}</p>
                <p><strong>Taxes (18%):</strong> â‚¹{{ gstAmount }}</p>
                <p><strong>Total Payable:</strong> â‚¹{{ totalPayable }}</p>
            </div>
        </div>

        <!-- Popup for confirmation -->
        <div class="popup" *ngIf="showConfirmation">
            <div class="popup-content">
                <h2>ðŸŽ‰ Booking Successful ðŸŽ‰</h2>
                <p>Your booking has been successfully confirmed!</p>
                <div class="popup-actions">
                    <button class="btn btn-view-details" (click)="viewDetails()">View Details</button>
                    <button class="btn btn-go-home" (click)="goToHome()">Go to Home</button>
                </div>
            </div>
        </div>
    </div>
</div>

